{"1747255183131":{"actionType":"saveAll","createdAt":"1747255183131","actionID":"1747255183131","userID":"#TEMP","path":"system.capsules.0f198dd9-d848-4540-bb27-829ddaafc053.capsUseCodeInfo.capsUseInputs.sss_custom_caps-0.capsIptTxtValue","oldValue":"() => {\n  // ---- Sua Chave Gemini Aqui\n  const apiKey = \"AIzaSyC8MD4ZTRedYmVIvwfAAVCX-OthA6QQ37c\";\n\n  // ---- Gemini API\n  async function generateContent() {\n    const url =\n      \"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=\" +\n      apiKey;\n\n    const data = {\n      contents: [\n        {\n          parts: [{ text: \"Explique em pt-br como funciona uma IA\" }],\n        },\n      ],\n    };\n\n    try {\n      const response = await fetch(url, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(data),\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Erro:\" + response.status + response.statusText);\n      }\n\n      const result = await response.json();\n      console.log(\"Resultado da API:\", result);\n    } catch (error) {\n      console.error(\"Erro na requisição:\", error);\n    }\n  }\n\n  // ---- Styles\n  const stlCenter = {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  };\n\n  const stlBtn = {\n    ...stlCenter,\n    backgroundColor: \"darkcyan\",\n    width: 100,\n    height: 24,\n  };\n\n  const stlTxt = {\n    color: \"white\",\n  };\n\n  const stlInput = {\n    color: \"white\",\n  };\n\n  const stlContainer = {\n    flex: 1,\n    width: \"100%\",\n    height: \"100%\",\n    ...stlCenter,\n    backgroundColor: \"#333\",\n  };\n\n  return (\n    <RN.View style={stlContainer}>\n      <RN.TextInput style={stlInput} />\n      <RN.Pressable style={stlBtn} onPress={generateContent}>\n        <RN.Text style={stlTxt}>GEMINI</RN.Text>\n      </RN.Pressable>\n    </RN.View>\n  );\n}","newValue":"() => {\n  const [sttInput, setInput] = React.useState(\"\");\n\n  // ---- Sua Chave Gemini Aqui\n  const apiKey = \"AIzaSyC8MD4ZTRedYmVIvwfAAVCX-OthA6QQ37c\";\n  console.log({ sttInput });\n\n  // ---- Gemini API\n  async function generateContent() {\n    const url =\n      \"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=\" +\n      apiKey;\n\n    const data = {\n      context:\n        \"Sua função será corrigir o texto dos prompts enviados dentro das regras do idioma Português (pt-br). Responda de forma direta nesse formato: Texto corrigido: '', Ajustes Feitos: ['item 1', 'item 2', 'item 3']\",\n      contents: [\n        {\n          parts: [{ text: sttInput }],\n        },\n      ],\n    };\n\n    try {\n      const response = await fetch(url, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(data),\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Erro:\" + response.status + response.statusText);\n      }\n\n      const result = await response.json();\n      console.log(\"Resultado da API:\", result);\n    } catch (error) {\n      console.error(\"Erro na requisição:\", error);\n    }\n  }\n\n  // ---- Styles\n  const stlCenter = {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  };\n\n  const stlBtn = {\n    ...stlCenter,\n    backgroundColor: \"darkcyan\",\n    width: 100,\n    height: 24,\n  };\n\n  const stlTxt = {\n    color: \"white\",\n  };\n\n  const stlInput = {\n    backgroundColor: \"rgba(255,255,255,.1)\",\n    padding: 10,\n    borderRadius: 10,\n    width: \"60%\",\n    color: \"white\",\n    margin: 20,\n  };\n\n  const stlContainer = {\n    flex: 1,\n    width: \"100%\",\n    height: \"100%\",\n    ...stlCenter,\n    backgroundColor: \"#111\",\n  };\n\n  return (\n    <RN.View style={stlContainer}>\n      <RN.TextInput\n        value={sttInput}\n        onChangeText={(val) => setInput(val)}\n        style={stlInput}\n        multiline={true}\n        numberOfLines={2}\n      />\n      <RN.Pressable style={stlBtn} onPress={generateContent}>\n        <RN.Text style={stlTxt}>GEMINI</RN.Text>\n      </RN.Pressable>\n    </RN.View>\n  );\n}"},"1747255183132":{"actionType":"saveAll","createdAt":"1747255183132","actionID":"1747255183132","userID":"#TEMP","path":"system.capsules.0f198dd9-d848-4540-bb27-829ddaafc053.capsUseCodeInfo.capsUseInputs.sss_custom_caps-0.capsIptTxtValue","oldValue":"() => {\n  const [sttInput, setInput] = React.useState(\"\");\n\n  // ---- Sua Chave Gemini Aqui\n  const apiKey = \"AIzaSyC8MD4ZTRedYmVIvwfAAVCX-OthA6QQ37c\";\n  console.log({ sttInput });\n\n  // ---- Gemini API\n  async function generateContent() {\n    const url =\n      \"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=\" +\n      apiKey;\n\n    const data = {\n      context:\n        \"Sua função será corrigir o texto dos prompts enviados dentro das regras do idioma Português (pt-br). Responda de forma direta nesse formato: Texto corrigido: '', Ajustes Feitos: ['item 1', 'item 2', 'item 3']\",\n      contents: [\n        {\n          parts: [{ text: sttInput }],\n        },\n      ],\n    };\n\n    try {\n      const response = await fetch(url, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(data),\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Erro:\" + response.status + response.statusText);\n      }\n\n      const result = await response.json();\n      console.log(\"Resultado da API:\", result);\n    } catch (error) {\n      console.error(\"Erro na requisição:\", error);\n    }\n  }\n\n  // ---- Styles\n  const stlCenter = {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  };\n\n  const stlBtn = {\n    ...stlCenter,\n    backgroundColor: \"darkcyan\",\n    width: 100,\n    height: 24,\n  };\n\n  const stlTxt = {\n    color: \"white\",\n  };\n\n  const stlInput = {\n    backgroundColor: \"rgba(255,255,255,.1)\",\n    padding: 10,\n    borderRadius: 10,\n    width: \"60%\",\n    color: \"white\",\n    margin: 20,\n  };\n\n  const stlContainer = {\n    flex: 1,\n    width: \"100%\",\n    height: \"100%\",\n    ...stlCenter,\n    backgroundColor: \"#111\",\n  };\n\n  return (\n    <RN.View style={stlContainer}>\n      <RN.TextInput\n        value={sttInput}\n        onChangeText={(val) => setInput(val)}\n        style={stlInput}\n        multiline={true}\n        numberOfLines={2}\n      />\n      <RN.Pressable style={stlBtn} onPress={generateContent}>\n        <RN.Text style={stlTxt}>GEMINI</RN.Text>\n      </RN.Pressable>\n    </RN.View>\n  );\n}","newValue":"() => {\n  const [sttInput, setInput] = React.useState(\"\");\n  const [sttResult, setResult] = React.useState({\n    correct_txt: \"\",\n    corrections: [],\n  });\n\n  const arrayCorrects = Object.values(sttResult.corrections);\n  console.log({ arrayCorrects });\n  const sizeCorrects = arrayCorrects.length;\n  console.log({ sizeCorrects });\n\n  // ---- Sua Chave Gemini Aqui\n  const apiKey = \"AIzaSyC8MD4ZTRedYmVIvwfAAVCX-OthA6QQ37c\";\n  // console.log({ sttInput });\n\n  // ---- Gemini API\n  async function generateContent() {\n    const url =\n      \"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=\" +\n      apiKey;\n\n    const data = {\n      contents: [\n        {\n          parts: [{ text: sttInput }],\n        },\n      ],\n      generationConfig: {\n        responseMimeType: \"application/json\",\n        responseSchema: {\n          type: \"OBJECT\",\n          properties: {\n            correct_txt: { type: \"STRING\" },\n            corrections: {\n              type: \"ARRAY\",\n              items: { type: \"STRING\" },\n            },\n          },\n          propertyOrdering: [\"correct_txt\", \"corrections\"],\n        },\n      },\n    };\n\n    try {\n      const response = await fetch(url, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(data),\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Erro:\" + response.status + response.statusText);\n      }\n\n      const result = await response.json();\n      const rawText = result.candidates[0].content.parts[0].text;\n      console.log(\"Resultado da API:\", result);\n\n      // Verificando se o conteúdo é uma string JSON\n      let parsedObject;\n      try {\n        parsedObject = JSON.parse(rawText);\n        console.log(\"Objeto convertido:\", parsedObject);\n      } catch (e) {\n        console.error(\"Erro ao converter o texto em objeto:\", e);\n      }\n\n      setResult(parsedObject);\n    } catch (error) {\n      console.error(\"Erro na requisição:\", error);\n    }\n  }\n\n  // ---- Styles\n  const stlCenter = {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  };\n\n  const stlBtn = {\n    ...stlCenter,\n    backgroundColor: \"darkcyan\",\n    width: 100,\n    height: 24,\n  };\n\n  const stlTxt = {\n    color: \"white\",\n  };\n\n  const stlInput = {\n    backgroundColor: \"rgba(255,255,255,.1)\",\n    padding: 10,\n    borderRadius: 10,\n    width: \"60%\",\n    color: \"white\",\n    margin: 20,\n  };\n\n  const stlContainer = {\n    flex: 1,\n    width: \"100%\",\n    height: \"100%\",\n    ...stlCenter,\n    backgroundColor: \"#111\",\n  };\n\n  return (\n    <RN.View style={stlContainer}>\n      <RN.TextInput\n        value={sttInput}\n        onChangeText={(val) => setInput(val)}\n        style={stlInput}\n        multiline={true}\n        numberOfLines={2}\n      />\n      <RN.Pressable style={stlBtn} onPress={generateContent}>\n        <RN.Text style={stlTxt}>CORRIGIR</RN.Text>\n      </RN.Pressable>\n\n      {sizeCorrects > 0 && (\n        <RN.View style={stlInput}>\n          <RN.Text style={stlTxt}>{sttResult.correct_txt}</RN.Text>\n          <RN.Text style={[stlTxt, { marginTop: 20 }]}>{\"CORREÇÕES:\"}</RN.Text>\n          <RN.FlatList\n            data={sttResult.corrections}\n            style={{ marginTop: 20 }}\n            renderItem={(props) => (\n              <RN.Text style={stlTxt}>{props.item}</RN.Text>\n            )}\n          />\n        </RN.View>\n      )}\n    </RN.View>\n  );\n}"}}