{"1748623383348":{"actionType":"saveAll","createdAt":"1748623383348","actionID":"1748623383348","userID":"#TEMP","path":"system.capsules.69b6448d-c0ac-4102-8748-210e1c6a043b.capsUseCodeInfo.capsUseInputs.sss_custom_caps-0.capsIptTxtValue","oldValue":"() => {\n  const path1 = \"all.forms.form1\";\n  const allVal = tools.getCtData(path1);\n\n  const { rendTrib, desMed, irRet, edu, prev, dep } = allVal;\n\n  const toNum = (str) => parseFloat((str || \"0\").replace(\",\", \".\"));\n\n  const totalDep = toNum(dep) * 2400;\n  const totalDed = toNum(desMed) + toNum(edu) + toNum(prev) + totalDep;\n  const calcBase = toNum(rendTrib) - totalDed;\n\n  const tabelaIR = tools.getCtData('all.tabelaIR');\n  const faixaEncontrada = tabelaIR.find(faixa => calcBase <= faixa.limite);\n\nconst irDevido = Math.max(0, (calcBase * (faixaEncontrada.aliquota / 100)) - faixaEncontrada.deducao);\n\n\n\n  console.log({ irDevido  });\n}","newValue":"() => {\n  const path1 = \"all.forms.form1\";\n  const allVal = tools.getCtData(path1);\n\n  const { rendTrib, desMed, irRet, edu, prev, dep } = allVal;\n\n  const toNum = (str) => parseFloat((str || \"0\").replace(\",\", \".\"));\n\n  const totalDep = toNum(dep) * 2400;\n  const totalDed = toNum(desMed) + toNum(edu) + toNum(prev) + totalDep;\n  const calcBase = toNum(rendTrib) - totalDed;\n\n  const tabelaIR = tools.getCtData('all.tabelaIR');\n  const faixaEncontrada = tabelaIR.find(faixa => calcBase <= faixa.limite);\n\nconst irDevido = Math.max(0, (calcBase * (faixaEncontrada.aliquota / 100)) - faixaEncontrada.deducao);\n\n\n\n  console.log({ irDevido });\n}"}}